syntax = "proto3";

option java_multiple_files = true;
option java_package = "com.example.sep3.grpc";
option java_outer_classname = "OfferServiceProto";

package proto;

service OfferService {
  rpc SaveOffer(SaveOfferRequest) returns (SaveOfferResponse);
  rpc GetOfferById(OfferIdRequest) returns (OfferResponse);
  rpc GetAvailableOffers(EmptyMessage) returns (OfferList);
  rpc GetOffers(FilterRequest) returns (FullOfferList);
  rpc UpdateOffer(OfferResponse) returns (OfferResponse);//maybe we should rename it so we can reuse it
}

message FilterRequest {
  repeated string categories = 1;
  optional int32 minOfferPrice = 2;
  optional int32 maxOfferPrice = 3;
  optional Time pickupTimeStart = 4;
  optional Time pickupTimeEnd = 5;
}


message SaveOfferRequest {
  string title = 1;
  string description = 2;
  int32 originalPrice = 3;
  int32 offerPrice = 4;
  int32 numberOfItems = 5;
  Date pickupDate = 6;
  Time pickupTimeStart = 7;
  Time pickupTimeEnd = 8;
  repeated string categories = 9;
  string imagePath = 10;
  int32 numberOfAvailableItems = 11;
}

message OfferIdRequest {
  string id = 1;
}

message OfferResponse {
  string id = 1;
  string title = 2;
  string description = 3;
  int32 originalPrice = 4;
  int32 offerPrice = 5;
  int32 numberOfItems = 6;
  Date pickupDate = 7;
  Time pickupTimeStart = 8;
  Time pickupTimeEnd = 9;
  repeated string categories = 10;
  string imagePath = 11;
  string status = 12;
  int32 numberOfAvailableItems = 13;
}

message SaveOfferResponse {
  string id = 1;
  string title = 2;
  string description = 3;
  int32 originalPrice = 4;
  int32 offerPrice = 5;
  int32 numberOfItems = 6;
  Date pickupDate = 7;
  Time pickupTimeStart = 8;
  Time pickupTimeEnd = 9;
  repeated string categories = 10;
  string imagePath = 11;
}

message ShortOfferResponse
{
  string id = 1;
  string title = 2;
  int32 originalPrice = 3;
  int32 offerPrice = 4;
  int32 numberOfAvailableItems = 5;
  Date pickupDate = 6;
  Time pickupTimeStart = 7;
  Time pickupTimeEnd = 8;
  string imagePath = 9;
  string status = 10;
}
message OfferList {
  repeated ShortOfferResponse offer = 1;
}

message FullOfferList {
  repeated OfferResponse offer = 1;
}

message Time {
  int32 hour = 1;
  int32 minute = 2;
}

message Date {
  int32 year = 1;
  int32 month = 2;
  int32 day = 3;
}

message EmptyMessage {

}






