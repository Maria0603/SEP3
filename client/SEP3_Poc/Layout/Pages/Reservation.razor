@page "/reservation"
@using System.Text.Json
@using SEP3_Poc.Pages
@inject HttpClient Http

@code {

    private FoodBag foodBag = new FoodBag {
        Id = 1,
        OldPrice = 99,
        NewPrice = 39,
    };

    private int quantity = 1;

    private decimal TotalCost => quantity * foodBag.NewPrice;

    private void IncrementQuantity() {
        quantity++;
    }

    private async Task SubmitPurchase() {
        var purchase = new SEP3_Poc.Pages.Reservation {
            ItemId = foodBag.Id,
            Quantity = quantity,
            Price = foodBag.NewPrice,
            Total = TotalCost
        };

        await Http.PostAsJsonAsync("api/purchase", purchase);
    }

}

<div>

    <h3> Reserve Order </h3>

    <div>
        <label>Item:</label>
        <span>@foodBag.Id</span>
    </div>

    <div>
        <label>Old Price:</label>
        <span>@foodBag.OldPrice dkk</span>
    </div>

    <div>
        <label>New Price:</label>
        <span>@foodBag.NewPrice dkk</span>
    </div>

    <div>
        <label>Quantity:</label>
        <button @onclick="IncrementQuantity">+</button>
        <span>@quantity</span>
    </div>

    <div>
        <label>Total Cost:</label>
        <span>@TotalCost dkk</span>
    </div>

    <button @onclick="SubmitPurchase">Submit Purchase</button>
</div>