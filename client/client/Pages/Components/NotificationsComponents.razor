@page "/notifications"
@using System.Text.Json
@using client.DTO.Notification
@using client.Services.Implementations
@inject NavigationManager NavigationManager
@inject NotificationService NotificationService
@inject AuthStateProvider AuthStateProvider


<div>
    @if (notifications is null)
    {
        <p>Loading........</p>
    }
    else
    {
        foreach (NotificationResponseDto notification in notifications)
        {
            <div>@notification.Content</div>
        }

    }
</div>

@code {
    private string _notificationButtonClass = "btn btn-default";
    private List<NotificationResponseDto> notifications = new List<NotificationResponseDto>();

    protected override async Task OnInitializedAsync()
    {
        notifications = await NotificationService.GetNotifications();
    }

    private void HandleNotification(string message)
    {
        _notificationButtonClass = "btn btn-warning"; // Change color on notification
        StateHasChanged();
    }

    private void ShowNotifications()
    {
        _notificationButtonClass = "btn btn-default"; // Reset color
    }

}